# ğŸš ë§›ì§‘ ê³µìœ  íˆìŠ¤í† ë¦¬ í”Œë«í¼, ìœ„ì‡ (WEat) ğŸ”

## â› ê°œë°œí™˜ê²½ | Development Enviornment

#### Language
![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E)
#### Runtime Platform
![NodeJS](https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white)
![NPM](https://img.shields.io/badge/NPM-%23000000.svg?style=for-the-badge&logo=npm&logoColor=white)
#### Framework
![Express.js](https://img.shields.io/badge/express.js-%23404d59.svg?style=for-the-badge&logo=express&logoColor=%2361DAFB)
#### Infrastructure
![AWS](https://img.shields.io/badge/AWS-%23232F3E.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)
![Amazon EC2](https://img.shields.io/badge/EC2-%23FF9900.svg?style=for-the-badge&logo=AmazonEC2&logoColor=white)
#### DB
![MongoDB](https://img.shields.io/badge/MongoDB-47A248.svg?&style=for-the-badge&logo=MongoDB&logoColor=white)
![mongoose](https://img.shields.io/badge/Mongoose-52B0E7?style=for-the-badge&logo=Mongoose&logoColor=white)
<img alt="s3" src ="https://img.shields.io/badge/Amazon S3-569A31.svg?&style=for-the-badge&logo=Amazon S3&logoColor=white"/>
<img alt="Lambda" src ="https://img.shields.io/badge/Lambda-FF4F8B.svg?&style=for-the-badge&logo=AWS Lambda&logoColor=white"/>
#### Dev tools
![Git](https://img.shields.io/badge/git-%23F05033.svg?style=for-the-badge&logo=git&logoColor=white)
![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)
<img src="https://img.shields.io/badge/VSCode-007ACC?style=for-the-badge&logo=Visual Studio Code&logoColor=white"/>

<br>

## ğŸŒ ì›¹ì‚¬ì´íŠ¸ | Website
- [ìœ„ì‡(WEat) http://weat.site](https://weat.site/)
- [ë°œí‘œ ì˜ìƒ](https://youtu.be/1oy_svsfoH0)

<br>

## âŒš ê°œë°œê¸°ê°„ | Project Period

- 2022.06.24 ~ 2022.08.05 (6ì£¼ê°„)

<br>


## ğŸ”­ëª©ì°¨ | Contents
1. [ìœ„ì‡ ì†Œê°œ | About WEat](#ìœ„ì‡-ì†Œê°œ--About-WEat)
2. [ì›¹ì‚¬ì´íŠ¸ | Webstie](#ì›¹ì‚¬ì´íŠ¸--Website)
3. [ì£¼ìš” API ê¸°ëŠ¥ | Main API](#ì£¼ìš”-API-ê¸°ëŠ¥--Main-API)
4. [ERD](#ERD)
5. [ê°œë°œí™˜ê²½ | Development Enviornment](#ê°œë°œí™˜ê²½--Development-Enviornmentt)
6. [ë¼ì´ë¸ŒëŸ¬ë¦¬ | Library](#ë¼ì´ë¸ŒëŸ¬ë¦¬--Library)
7. [ê¸°ìˆ ì  ì±Œë¦°ì§€ | Trouble shooting](#ê¸°ìˆ ì -ì±Œë¦°ì§€--Trouble-shooting)
8. [ë°±ì—”ë“œ íŒ€ì› | BE TEAM](#ë°±ì—”ë“œ-íŒ€ì›--BE-TEAM)
9. [More Info](#More-Info)
<br>
<hr>

## ğŸ‰ ìœ„ì‡ ì†Œê°œ | About WEat
<img src="https://xoxokss.s3.ap-northeast-2.amazonaws.com/%E1%84%8A%E1%85%A5%E1%86%B7%E1%84%82%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF.jpeg" width="750">
<br>

### ê°€ê³  ì‹¶ì€ ë§›ì§‘! ë‹¤ì‹œ ê°€ê³  ì‹¶ì€ ë§›ì§‘ì„ ì €ì¥í•˜ê³  ê³µìœ í•  ë•?

ğŸ‘‰ ë‚˜ë§Œ ì•Œê³  ìˆë˜ ë§›ì§‘ì„ ì €ì¥í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„ </br>
ğŸ‘‰ ì§€ë„ë¥¼ í†µí•´ ë§›ì§‘ ìœ„ì¹˜ë¥¼ ì‰½ê²Œ ì €ì¥í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„ </br>
ğŸ‘‰ ì§€ì¸ë“¤ê³¼ ê°™ì´ ì‘ì„±í•˜ëŠ” ì§„ì§œ ë§›ì§‘ ë¦¬ë·°ë¥¼ ê³µìœ í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„ </br>

- ìœ„ì‡(WEat)ì€ ì§€ì¸ë“¤ê³¼ ê³µìœ í•˜ëŠ” ë§›ì§‘ íˆìŠ¤í† ë¦¬ í”Œë«í¼ì…ë‹ˆë‹¤.

<br>

## âš” ì£¼ìš” API ê¸°ëŠ¥ | Main API 
- ì§€ì¸ë“¤ê³¼ í•¨ê»˜ ë§›ì§‘ ì •ë³´ë¥¼ ê³µìœ í•˜ëŠ” ë°© or ë‚˜ë§Œì˜ ë§›ì§‘ ë¦¬ìŠ¤íŠ¸ ë¹„ê³µê°œë°© ìƒì„±
- ë§›ì§‘ ì§€ë„ (ë§›ì§‘ ê²€ìƒ‰, íƒœê·¸ í•„í„°)
- ë§›ë°© ì´ˆëŒ€ ë° ê²Œì‹œë¬¼ ë“±ë¡ì˜ ì‹¤ì‹œê°„ ì•Œë¦¼
- ë¨¹ê¸°ë¡ (ì‚¬ìš©ì ê¸°ë¡ ì¸í¬ê·¸ë˜í”„)

<img src="https://xoxokss.s3.ap-northeast-2.amazonaws.com/images/origin/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA+2022-08-05+%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB+1.10.41.png">


<br>

## ğŸ›  ì•„í‚¤í…ì³ | Architecture
<img src="https://user-images.githubusercontent.com/105095093/182834501-d552321d-27fb-48b3-aafe-a7f974719612.png" width="750">


## ğŸ”‘ ERD 


![erd](https://xoxokss.s3.ap-northeast-2.amazonaws.com/_WEat+(2).png)

<br>

## ğŸ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ | Library

| Name                | Appliance               | Version  |
| :-----------------: | :---------------------: | :------: |
| aws-sdk             |	AWS ì„œë¹„ìŠ¤ í˜¸ì¶œ             |2.1166.0|
| bcrypt              |	ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”              |5.0.1|
| cors                | CORS í•¸ë“¤ë§                |2.8.5|
| dotenv              | í™˜ê²½ë³€ìˆ˜ ì„¤ì •                |16.0.1|
| helmet              | HTTP header ë³´ì•ˆ          |5.1.0|
| jsonwebtoken        | JWTí† í° ë°œê¸‰               |8.5.1|
| lodash              | ëª¨ë“ˆì„± javascript ìœ í‹¸ë¦¬í‹°  |4.17.21|
| nomailer            | ì¸ì¦ ë©”ì¼ ë°œì†¡             |6.7.5|
| mongoose            | MongoDB ODM             |6.4.0|
| morgan              | HTTP ìš”ì²­ ë¡œê·¸ ê´€ë¦¬        |1.10.0|
| multer              | íŒŒì¼ ì—…ë¡œë“œ ë¯¸ë“¤ì›¨ì–´         |1.4.5|
| multer-s3           | AWS S3ìš© multer ì—”ì§„      |2.10.0|
| passport            | node.js authentication  |0.5.2|
| passport-kakao      | ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ ëª¨ë“ˆ       |1.0.1|
| passport-google-oauth20      | êµ¬ê¸€ ë¡œê·¸ì¸ ëª¨ë“ˆ   |2.0.0|
| prettier            | ì½”ë“œ ì„œì‹                 |2.7.1|
| socket.io           | socket.io ì—°ê²°           |4.5.1|

<br>


## ğŸŠğŸ»â€â™‚ï¸ ê¸°ìˆ ì  ì±Œë¦°ì§€ | Trouble shooting

### issue1: ì‚¬ìš©ìë§ˆë‹¤ ë‹¤ë¥¸ ìƒíƒœë¥¼ ë³´ì—¬ì£¼ëŠ” ë§›ë°©ì˜ DB ì„¤ê³„

#### ğŸ™ situation
- ì²˜ìŒì—ëŠ” ë§›ë°©(Room)ì˜ ì»¬ë ‰ì…˜ì— ìƒíƒœ(status) í•„ë“œë¥¼ ë§Œë“¤ì–´ ì €ì¥í•˜ê³  í‘œì‹œí•˜ë ¤ í–ˆì§€ë§Œ ì‚¬ìš©ìë§ˆë‹¤ ë‹¤ë¥¸ ìƒíƒœë¥¼ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì„ ê°„ê³¼í•¨.
- ë˜í•œ ì‚¬ìš©ìë§ˆë‹¤ ë°© ëª©ë¡ì˜ ìˆœì„œë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•´ì„œ ì €ì¥í•  ìˆ˜ ìˆì–´ì•¼ í•¨.
- ë°©ì˜ ìƒíƒœë¥¼ ì‚¬ìš©ìì˜ ìƒí™©ì— ë”°ë¼ 3ê°€ì§€ë¡œ ë¶„ë¥˜í•˜ì—¬ í‘œì‹œí•˜ê¸° ìœ„í•œ DB ì„¤ê³„ í•„ìš”.
1. ì‚¬ìš©ìë§Œ "í˜¼ì"ìˆëŠ” ë¹„ë°€ë°©
2. ì‚¬ìš©ìê°€ "ë°©ì¥"ì¸ ë‹¨ì²´ë°©
3. ì‚¬ìš©ìê°€ "ê²ŒìŠ¤íŠ¸ ë©¤ë²„"ì¸ ë‹¨ì²´ë°©

#### ğŸš¥ solution 
- ì‚¬ìš©ì ê°œì¸ì˜ ë°© ëª©ë¡ ìˆœì„œë¥¼ ì§€ì •í•˜ëŠ” ì»¬ë ‰ì…˜ì„ ë³„ë„ë¡œ ë§Œë“¤ì—ˆê³ , ë°©ì´ ì‚­ì œë˜ë©´ ë°© ëª©ë¡ì˜ ìˆœì„œ ì»¬ë ‰ì…˜ì—ì„œë„ ë„íë¨¼íŠ¸ê°€ ìˆ˜ì •, ì‚­ì œë˜ë„ë¡ êµ¬í˜„.
- ë°©ë§ˆë‹¤ statusëŠ” ì €ì¥í•˜ì§€ ì•Šì§€ë§Œ ë§›ë°© ì»¬ë ‰ì…˜ì—ëŠ” ë°©ì¥ê³¼ ê²ŒìŠ¤íŠ¸ ëª…ë‹¨ì„ ì €ì¥í•˜ëŠ” í•„ë“œ ì¡´ì¬. 
- ì¡°ê±´ë¬¸ì„ í†µí•´ ì‚¬ìš©ìê°€ ë°©ì¥ì¸ì§€, ê²ŒìŠ¤íŠ¸ì¸ì§€, í˜¼ìì¸ì§€ ë¶„ë¥˜í•˜ì—¬ ì‚¬ìš©ìë§ˆë‹¤ ê°ê° ë‹¤ë¥¸ ìƒíƒœë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„.

---

### issue2: ì‚¬ìš©ìì˜ ìœ„ë„ê²½ë„ì— ë”°ë¼ ì£¼ë³€ ë°˜ê²½ 20kmì˜ ë§›ì§‘ì„ ì°¾ì•„ì„œ ì¶œë ¥í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„.
#### ğŸ™ situation
- 1ì°¨ ìŠ¤ì½”í”„(1~3ì£¼ì°¨) : ë§›ì§‘ì˜ ìœ„ë„ì™€ ê²½ë„ë¥¼ DBì— ì €ì¥í•˜ê¸°ë§Œ í•¨.
- 2ì°¨ ìŠ¤ì½”í”„(3ì£¼ì°¨~) : ì €ì¥ëœ ë§›ì§‘ì˜ ìœ„ë„ ê²½ë„ë¥¼ í´ë¼ì´ì–¸íŠ¸ì˜ kakao APIì— ë³´ì—¬ì£¼ê¸° ìœ„í•´ MongoDBë¥¼ ì–´ë–»ê²Œ ê°€ê³µí•´ì•¼í• ì§€ êµ¬ìƒ ë° ì •ë³´ ê²€ìƒ‰.

#### ğŸš¥ solution 
- MongoDBëŠ” ì§€ì˜¤ë©”íŠ¸ë¦¬ë¥¼ ìœ„í•œ GeoJson ë°ì´í„°í˜•ì‹ì„ ì§€ì›í•œë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ê³ , ODMì¸ Mongooseë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì‰½ê²Œ ê°€ê³µí•  ìˆ˜ ìˆì—ˆìŒ.
- ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ì • ë°˜ê²½ ë‚´ì˜ ë§›ì§‘ë“¤ì„ ì„ ë³„ ì¶œë ¥í•  ìˆ˜ ìˆì„ ë¿ ì•„ë‹ˆë¼, 2dsphere ì¸ë±ìŠ¤ë¥¼ ì •ì˜í•˜ì—¬ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆì—ˆìŒ.
- ì‚¬ìš©ìì˜ 2km ë°˜ê²½ì„ ê¸°ì¤€ìœ¼ë¡œ ì¶œë ¥í•˜ëŠ” ê²Œ ì²« ê¸°íšì´ì—ˆìœ¼ë‚˜, ì´ˆê¸° ë§›ì§‘ ë°ì´í„°ì˜ ë¹ˆì•½ ë•Œë¬¸ì— 20km ë°˜ê²½ ë²”ìœ„ë¡œ í™•ëŒ€ ì ìš©í•¨. 
- íŠ¹ì • ì§€ì—­ì— ë§›ì§‘ ë°ì´í„°ê°€ ëª°ë¦¬ê±°ë‚˜, ë¶€ì¡±í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ì¸ ë°˜ê²½ ì¶œë ¥ ì•Œê³ ë¦¬ì¦˜ì´ í•„ìš”í•´ ë³´ì„.

---

### issue3: ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• / Lambda ì‹¤í–‰ì†ë„ ê´€ë ¨ ì´ìŠˆ
#### ğŸ™ situation
- ì‚¬ì´íŠ¸ ë§›ì§‘ ë¦¬ë·°ì— ìµœëŒ€ 5ì¥ì˜ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì–´ ê³ í™”ì§ˆì˜ ë””í´íŠ¸ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ ì†ŒìŠ¤ê´€ë¦¬ í•„ìš”.
- ìš©ëŸ‰ì´ í° ì´ë¯¸ì§€ë“¤ì´ ë‹¤ìˆ˜ ë Œë”ë§ë  ë•Œ ì²˜ë¦¬ì‹œê°„ì— ëŒ€í•œ ê°œì„ ì˜ í•„ìš”ì„±ì´ ë¶€ê°ë¨.

#### ğŸš¥ solution 
#### 1) ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•
- ì—…ë¡œë“œëœ ì´ë¯¸ì§€ëŠ” AWS-S3ì— ì €ì¥, ì§€ì •ëœ í´ë”ì— ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë  ë•Œ ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°ë¥¼ ë°œë™ì‹œì¼œ Lambdaì˜ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë„ë¡ ì—°ê²°.
- ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•ì˜ ê³¼ì •ì„ ì›¹ì„œë²„ê°€ ì•„ë‹Œ ì„œë²„ë¦¬ìŠ¤ Lambdaì˜ í•¨ìˆ˜ë¥¼ í†µí•´ ì‹¤í–‰ë˜ë„ë¡ í•˜ì—¬ ì›¹ì„œë²„ íŠ¸ë˜í”½ ë¶„ì‚°.
- í´ë¼ì´ì–¸íŠ¸ì—ëŠ” ë¦¬ì‚¬ì´ì§•ëœ ì´ë¯¸ì§€ê°€ ë¶ˆëŸ¬ì™€ì§€ë„ë¡ í•˜ì—¬ ì²˜ë¦¬ì†ë„ ê°œì„ .

#### 2) Lambda ì—ëŸ¬ ë°œìƒ
#### ğŸ™ situation
- í° ìš©ëŸ‰ì´ë‚˜ ë‹¤ìˆ˜ì˜ ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•˜ì—¬ ê²Œì‹œê¸€ ë“±ë¡í•˜ë©´ ë¦¬ì‚¬ì´ì§• í•¨ìˆ˜ê°€ ì—ëŸ¬ë‚˜ëŠ” í˜„ìƒ ë°œìƒ.
- Lambda í•¨ìˆ˜ì˜ ê°€ìš©ë©”ëª¨ë¦¬ ì¦ì„¤(128MB -> 256MB), ì§€ì—°ì‹œê°„ ì„¤ì •ì„ ì ìš©í•´ë³´ì•˜ìœ¼ë‚˜ ì—ëŸ¬ë¥¼ ìˆ˜ë¦¬í•˜ì§€ ëª»í•¨.

#### ğŸš¥ solution 
- Lambda@edgeë¼ëŠ” ê¸°ëŠ¥ì„ í™œìš©í•œë‹¤ëŠ” ê²ƒì„ ì„œì¹­í•˜ì˜€ìœ¼ë©°, ì„œë²„ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³ , ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ í•¨ìˆ˜ê°€ ì‚¬ìš©ìì—ê²Œ ì¢€ ë” ê°€ê¹Œìš´ ìœ„ì¹˜(ë¦¬ì „)ì—ì„œ íŠ¸ë¦¬ê±° ë˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸.
- ìµœì¢… ì œì¶œì¼ì— ë§ì¶° í•´ê²°í•˜ì§€ ëª»í–ˆì§€ë§Œ ì¶”í›„ ì ìš©í•˜ê³ ì í•¨.

<br>

## ğŸ¤¸ğŸ»â€â™€ï¸ë°±ì—”ë“œ íŒ€ì› | BE TEAM

<br/>
<table>
   <tr>
    <td align="center" width="20%"><b>name</b></td>
    <td align="center"width="10%"><b>postion</b></td>
    <td align="center"width="40%"><b>work</b></td>
    <td align="center"width="40%"><b>Github</b></td>
  </tr>
  <tr>
    <td align="center"><b>ì´ì§„í¬</b></a></td>
    <td align="center">Leader</td>
    <td align="left"> 
    - ì¹´ì¹´ì˜¤, êµ¬ê¸€ ì†Œì…œ ë¡œê·¸ì¸ <br>
    - ì´ë©”ì¼ ì¸ì¦ <br>
    - ìœ ì € í”„ë¡œí•„ ì •ë³´ ê´€ë¦¬ <br> 
    - JWTí† í° ì¸ì¦ê´€ë¦¬ <br> 
    - ì‚¬ìš©ì ê¸°ë¡ ë°ì´í„° ë¶„ì„(ë¨¹ê¸°ë¡)<br> 
    - ë§›ë°© detail CRUD <br> 
    - ì•Œë¦¼ ê¸°ëŠ¥(socket.io) <br> 
    - EC2 t3 HTTPS ì„œë²„ ë°°í¬ <br> 
    - CICD </td>
    <td align="center">https://github.com/Ljinyh</td>

  </tr>
    <tr>
    <td align="center"><b>ê¹€ìƒì„ </b></a></td>
    <td align="center">Member</td>
    <td align="left">
    - ë§›ë°©(Room) CRUD<br> 
    - ë§›ì§‘ CRUD<br> 
    - ì¢‹ì•„ìš” ê¸°ëŠ¥<br> 
    - ë§›ì§‘ íƒœê·¸ ê²€ìƒ‰ í•„í„°ë§ <br> 
    - DB ì„¤ê³„(NoSQL) <br> 
    - ìœ„ë„ê²½ë„(GeoJson) CRUD <br> 
    - AWS S3 Lambda ì´ë¯¸ì§€ ì—…ë¡œë“œ & ë¦¬ì‚¬ì´ì§•</td>
   <td align="center">https://github.com/xoxokss</td>
  </tr>
</table>
<br/>

## ğŸ• More Info 
[ğŸŒ¿ í”„ë¡œì íŠ¸ ì†Œê°œ ë¬¸ì„œ](https://www.notion.so/WEat-617066c95d3f422fb10dda696d8f1b43)  
[ğŸ’¾ ì™€ì´ì–´í”„ë ˆì„ Figma](https://www.figma.com/file/W4Yr7Umu4AvKSsI19LVouG/WEat?node-id=187%3A1238)  
[ğŸ” Front-End Github Repo](https://github.com/jeelly/weat/) 
